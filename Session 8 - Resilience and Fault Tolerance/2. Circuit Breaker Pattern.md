# Circuit Breaker Pattern

## Categorization: Reactive
The Circuit Breaker Pattern is categorized as a reactive strategy because it is designed to handle failures and prevent cascading failures in a system after a problem has been detected. It reacts to failures by preventing calls to a failing service and providing fallback mechanisms.

> It is hard to categorize the circuit breaker because it is pro- and reactive at the same time. It detects that a given downstream system is malfunctioning (reactive) and it protects the upstream systems from transient errors (proactive).

## How It Works
The Circuit Breaker Pattern works by monitoring the interactions with a service. It is based on three states:

1. **Closed**: The circuit breaker allows all requests to pass through to the service. If the failure rate exceeds a predefined threshold, the circuit breaker transitions to the Open state.
   
2. **Open**: The circuit breaker rejects all requests to the service, and the system immediately returns a fallback response or error. During this state, it periodically transitions to the Half-Open state to test if the service has recovered.

3. **Half-Open**: The circuit breaker allows a limited number of requests to pass through to test if the service has recovered. If these requests succeed, the circuit breaker transitions back to the Closed state. If they fail, it goes back to the Open state.

The goal is to avoid making requests to a failing service and to allow it time to recover, thus improving the systemâ€™s overall resilience.

## Sample Application in Real Life
Imagine an e-commerce application with a microservice architecture. The order service relies on a payment service to process transactions. If the payment service starts failing or becomes too slow, the circuit breaker will open, preventing the order service from making further requests to the payment service. Instead, the order service can return a fallback response, such as notifying the user of the issue or using a temporary offline payment method.

## Parameters Required
- **Failure Threshold**: The rate of failures or errors at which the circuit breaker should transition from Closed to Open. 
- **Timeout Duration**: The period the circuit breaker will wait before transitioning from Open to Half-Open.
- **Success Threshold**: The number of successful requests needed in Half-Open state before transitioning back to Closed.
- **Fallback Mechanism**: The response or action to take when the circuit breaker is Open.